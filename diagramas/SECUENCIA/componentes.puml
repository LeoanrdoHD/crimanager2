@startuml
skinparam componentStyle uml2
skinparam component {
  BackgroundColor #E6E6FA
  BorderColor #4682B4
}
skinparam database {
  BackgroundColor #FFE4E1
  BorderColor #DC143C
}

' Colores para diferentes tipos de conexiones
skinparam arrow {
  Color #2E8B57
}

actor "Usuario" as User

' ===================== CAPA DE PRESENTACIÓN =====================
package "PRESENTACIÓN" as Frontend {
  
  package "Auth & Home" {
    component "LoginView" as LoginView
    component "HomeView" as HomeView
  }
  
  package "Usuarios" {
    component "UserIndexView" as UserIndexView
    component "ShowUserView" as ShowUserView
    component "CreateUserView" as CreateUserView
    component "EditUserView" as EditUserView
  }
  
  package "Delincuentes" {
    component "create_criminal" as CreateCriminalView
    component "search_cri" as SearchCriminalView
    component "show_file" as ShowFileView
    component "create_arrest" as ArrestFormView
  }
  
  package "Búsquedas" {
    component "search_vehicle" as SearchVehicleView
    component "search_orga" as SearchOrganizationView
  }
}

' ===================== CAPA DE CONTROLADORES ===================== 
package "CONTROLADORES" as Controllers {
  component "UserController" as UserController
  component "criminalcontroller" as CriminalController
  component "HistorialController" as HistorialController
  component "ReportsController" as ReportsController
}

' ===================== CAPA DE DATOS =====================
package "BASE DE DATOS" as Database {
  
  package "Auth" {
    database "users" as UsersDB
    database "user_sessions" as SessionsDB
  }
  
  package "Criminales" {
    database "criminals" as CriminalsDB
    database "physical_characteristics" as CharacteristicsDB
    database "photographs" as PhotosDB
  }
  
  together {
    package "Historiales" {
      database "arrest_and_apprehension_histories" as ArrestsDB
      database "convictions" as ConvictionsDB
    }
    
    package "Asociados" {
      database "criminal_tools" as ToolsDB
      database "criminal_phone_numbers" as PhonesDB
      database "criminal_complices" as ComplicesDB
      database "criminal_vehicles" as VehiclesDB
      database "criminal_organizations" as OrganizationsDB
    }
  }
}

' ===================== CONEXIONES PRINCIPALES =====================
User --> LoginView
User --> HomeView

' Autenticación (Verde)
LoginView -[#228B22]-> UserController
UserController -[#228B22]-> UsersDB
UserController -[#228B22]-> SessionsDB
UserController -[#228B22]-> HomeView

' Gestión de Usuarios (Azul)
HomeView -[#4169E1]-> UserIndexView
UserIndexView -[#4169E1]-> UserController
ShowUserView -[#4169E1]-> UserController
CreateUserView -[#4169E1]-> UserController
EditUserView -[#4169E1]-> UserController
UserController -[#4169E1]-> UsersDB

' Gestión de Delincuentes (Rojo)
HomeView -[#DC143C]-> CreateCriminalView
CreateCriminalView -[#DC143C]-> CriminalController
CriminalController -[#DC143C]-> CriminalsDB
CriminalController -[#DC143C]-> CharacteristicsDB
CriminalController -[#DC143C]-> PhotosDB

' Búsquedas y Reportes (Naranja)
HomeView -[#FF8C00]-> SearchCriminalView
HomeView -[#FF8C00]-> SearchVehicleView
HomeView -[#FF8C00]-> SearchOrganizationView

SearchCriminalView -[#FF8C00]-> ReportsController
SearchVehicleView -[#FF8C00]-> ReportsController
SearchOrganizationView -[#FF8C00]-> ReportsController

ReportsController -[#FF8C00]-> CriminalsDB
ReportsController -[#FF8C00]-> ArrestsDB
ReportsController -[#FF8C00]-> VehiclesDB
ReportsController -[#FF8C00]-> OrganizationsDB

SearchCriminalView -[#FF8C00]-> ShowFileView

' Gestión de Arrestos (Morado)
SearchCriminalView -[#9932CC]-> ArrestFormView
ArrestFormView -[#9932CC]-> HistorialController

HistorialController -[#9932CC]-> ArrestsDB
HistorialController -[#9932CC]-> ConvictionsDB
HistorialController -[#9932CC]-> ToolsDB
HistorialController -[#9932CC]-> PhonesDB
HistorialController -[#9932CC]-> ComplicesDB
HistorialController -[#9932CC]-> VehiclesDB

@enduml