@startuml
skinparam backgroundColor #FFFFFF
skinparam node {
  BackgroundColor #E6E6FA
  BorderColor #4682B4
  FontColor Black
}
skinparam arrowColor #4682B4

' Definimos las vistas como nodos
node "Login" as LoginView
node "Home" as HomeView
node "Index (Usuarios)" as UserIndex
node "Show Usuario" as ShowUser
node "Create Usuario" as CreateUser
node "Edit Usuario" as EditUser

node "create_criminal" as CreateCriminal
node "search_cri" as SearchCriminal
node "show_file" as ShowFile
node "create_arrest" as ArrestForm

node "search_vehicle" as SearchVehicle
node "search_orga" as SearchOrganization

' Relación del flujo de autenticación
LoginView --> HomeView : login válido

' Gestión de Usuarios
HomeView --> UserIndex : ir a gestión de usuarios
UserIndex --> ShowUser : ver detalles
UserIndex --> CreateUser : nuevo usuario
CreateUser --> UserIndex : guardar -> lista actualizada
UserIndex --> EditUser : editar usuario
EditUser --> UserIndex : actualizar, asignar roles,\n desactivar -> lista
EditUser --> EditUser : restablecer contraseña

' Registro de delincuentes
HomeView --> CreateCriminal : registrar delincuente
CreateCriminal --> SearchCriminal : guardar exitoso
CreateCriminal --> CreateCriminal : errores de validación

' Búsqueda general de delincuentes
HomeView --> SearchCriminal
SearchCriminal --> ShowFile : ver perfil
ShowFile --> SearchCriminal : volver

' Desde SearchCriminal se puede...
SearchCriminal --> ArrestForm : registrar arresto
ArrestForm --> ArrestForm : registrar condena
ArrestForm --> ArrestForm : registrar vehículo

' Al registrar arresto/condena/vehículo
ArrestForm --> ArrestForm : mostrar mensajes de éxito

' Búsqueda por Vehículos
HomeView --> SearchVehicle
SearchVehicle --> SearchVehicle : mostrar resultados

' Búsqueda por Organizaciones
HomeView --> SearchOrganization
SearchOrganization --> SearchOrganization : mostrar resultados

' Generación de PDF desde búsqueda
SearchCriminal --> SearchCriminal : descargar PDF

@enduml
